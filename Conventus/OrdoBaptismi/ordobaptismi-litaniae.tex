% LuaLaTeX

\documentclass[a4paper, twoside, 12pt]{article}
\usepackage[latin]{babel}
%\usepackage[landscape, left=3cm, right=1.5cm, top=2cm, bottom=1cm]{geometry} % okraje stranky
\usepackage[portrait, a4paper, mag=1220, truedimen, left=0.8cm, right=0.8cm, top=0.6cm, bottom=0.6cm]{geometry} % okraje stranky

\usepackage{fontspec}
\setmainfont[FeatureFile={junicode.fea}, Ligatures={Common, TeX}, RawFeature=+fixi]{Junicode}
%\setmainfont{Junicode}

% shortcut for Junicode without ligatures (for the Czech texts)
\newfontfamily\nlfont[FeatureFile={junicode.fea}, Ligatures={Common, TeX}, RawFeature=+fixi]{Junicode}

\usepackage{multicol}
\usepackage{color}
\usepackage{lettrine}
\usepackage{fancyhdr}

% usual packages loading:
\usepackage{luatextra}
\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{gregoriotex} % for gregorio score inclusion
\usepackage{gregoriosyms}
\usepackage{wrapfig} % figures wrapped by the text
\usepackage{parcolumns}
\usepackage[contents={},opacity=1,scale=1,color=black]{background}
\usepackage{tikzpagenodes}
\usepackage[savepos]{zref}
\usepackage{calc}
\usepackage{longtable}
\newif\ifparvulus
\parvulustrue

\ifparvulus
\newcommand{\parvulum}{parvulus}%
\else
\newcommand{\parvulum}{parvula}%
\fi

\setlength{\headheight}{12pt}

\input{conventuscommune.tex} % Often used macros
\input{translationes_cs.tex} % Czech translations of the proper texts

\setlength{\columnsep}{15pt} % prostor mezi sloupci

\makeatletter
\newcounter{litscore}
\newcounter{littabstop}[litscore]
\newcommand{\grealign}{%
	\@bsphack%
	\ifgre@boxing\else%
		\kern\gre@dimen@begindifference%
		\stepcounter{littabstop}%
		\expandafter\zsavepos{stop-\thelitscore-\thelittabstop}%
		\kern-\gre@dimen@begindifference%
	\fi%
	\@esphack%
}

\newcommand{\litsetstops}{%
  \gdef\nstabbing@stops{%
    \hspace*{-\oddsidemargin}\hspace{-1in}%
    \hspace*{\zposx{stop-\thelitscore-1} sp}\=%
  }%
  \count@=\@ne
  \loop\ifnum\count@<\value{littabstop}%
    \begingroup\edef\x{\endgroup
      \noexpand\g@addto@macro\noexpand\nstabbing@stops{%
        \noexpand\hspace{-\noexpand\zposx{stop-\thelitscore-\the\count@} sp}%
        \noexpand\hspace{\noexpand\zposx{stop-\thelitscore-\the\numexpr\count@+1} sp}\noexpand\=%
      }%
    }\x
    \advance\count@\@ne
  \repeat
  \nstabbing@stops\kill
}
\makeatother

\newenvironment{nstabbing}
  {\setlength{\topsep}{0pt}%
   \setlength{\partopsep}{0pt}%
   \tabbing%
   \litsetstops}
  {\endtabbing\stepcounter{litscore}}

\renewcommand{\rubricatum}[1]{\textit{\color{red}#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

% Here we set the space around the initial.
% Please report to http://home.gna.org/gregorio/gregoriotex/details for more details and options
\grechangedim{afterinitialshift}{2.2mm}{scalable}
\grechangedim{beforeinitialshift}{2.2mm}{scalable}
\grechangedim{interwordspacetext}{0.20 cm plus 0.15 cm minus 0.05 cm}{scalable}%
\grechangedim{annotationraise}{-0.2cm}{scalable}

% Here we set the initial font. Change 38 if you want a bigger initial.
% Emit the initials in red.
\grechangestyle{initial}{\color{red}\fontsize{38}{38}\selectfont}

\renewcommand{\headrulewidth}{0pt} % no horiz. rule at the header
\pagestyle{empty}

\grechangedim{spaceabovelines}{0.2cm}{scalable}%

\sineinitiali{temporalia/litaniae.gtex}

\begin{nstabbing}
\ifparvulus
\>Sancti Angeli \>\>\>\>\textbf{De}-\>\>i, \>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\fi
\>Sancte Ioánnes \>\>\>Ba-\textbf{ptí}-\>\>\>sta, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>\>\textbf{Io}-\>seph, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancti Petre et \>\>\>\>\textbf{Pau}-\>\>le, \>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>An-\textbf{dré}-\>\>\>a, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Io-\textbf{án}-\>\>\>nes, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>\>\textbf{Phí}lippe, \>\>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Bartholo-\>\>\>\>\textbf{mǽ}-\>\>e, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Ia-\textbf{có}-\>\>\>be, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta María Magda-\>\>\>\>\textbf{lé}-\>\>na, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>\>\textbf{Sté}-\>phane, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Ignáti Antio-\>\>\>\>\textbf{ché}-\>\>ne, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Lau-\textbf{rén}-\>\>\>ti, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sanctæ Perpétua et \>\>\>Fe-\>\textbf{lí}-\>citas, \>\>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>\>\>\textbf{A}-\>gnes, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Gre-\textbf{gó}-\>\>\>ri, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>Au-\>gu-\textbf{stí}-\>\>\>ne, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>A-\>tha-\textbf{ná}-\>\>\>si, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Ba-\>\textbf{sí}-\>\>li, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Martíne Turo-\>\>\>\>\textbf{nén}-\>\>sis, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>Be-\>ne-\textbf{dí}-\>\>\>cte, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Francísce et \>\>\>Do-\textbf{mí}-\>\>nice, \>\>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>I-\>\textbf{gná}-\>\>ti, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Francísce \>\>\>\>\textbf{Xá}-\>vier, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta Terésia de \>\>\>\>\textbf{A}-\>vila, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Cýrile et \>\>\>Me\>\textbf{thó}-\>\>di, \>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>\>\>\textbf{Lúd}mila, \>\>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>Ven\>ce-\>\textbf{slá}-\>\>e, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>A-\>dal-\textbf{bér}-\>\>\>te, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Pro\>\textbf{có}-\>\>pi, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta Agnes \>\>\>Bo-\>\textbf{hé}-\>mica, \>\>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>\>Zdi\>\textbf{sla}-\>\>va, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Ioánne Nepomu-\>\>\>\>\textbf{cé}-\>\>ne, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>Lu-\>do-\>\textbf{ví}-\>\>ce, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>Dio-\textbf{ný}-\>\>\>sie, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta Ioánna \>\>\>Ar-\textbf{cén}-\>\>\>sis, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta Terésia Lexovi-\>\>\>\>\textbf{én}-\>\>sis, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>Ge-\>no-\textbf{vé}-\>\>\>fa, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>Chlode\>\>\textbf{chíl}-\>\>dis, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>\>Io-\>\textbf{lá}-\>\>na, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Benedícte \>\>\>\>\textbf{Lab}-\>\>re, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte Guil-\>\>\>\>\textbf{lél}-\>\>me, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>O-\>\textbf{lí}-\>\>veri, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancta \>\>Chris-\>\>\textbf{tí}-\>\>na, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>\>\textbf{Sí}-\>\>meon, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Sancte \>\>\>\>\textbf{Ro}-\>\>che, \>\>o-\>\textit{ra} \>\textit{pro} \textbf{no}bis.\\
\>Omnes Sancti et Sanctæ \>\>\>\>\textbf{De}-\>\>i, \>orá-\>\>\textit{te} \>\textit{pro} \textbf{no}bis.\\
\end{nstabbing}

\end{document}
